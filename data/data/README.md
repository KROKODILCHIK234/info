# Дашборд Байкальской природной территории

Интерактивный дашборд на основе данных о Байкальской природной территории с визуализациями различных экологических, природных и социальных данных.

## Функциональность

- **Интерактивная карта**: Детальная карта Байкальской природной территории с отображением городов, заповедников, землетрясений и пожаров
- **Экологические визуализации**: Анализ уровня воды, качества воздуха, вылова рыбы и других экологических показателей
- **Анализ туристической активности**: Динамика туристического потока с прогнозом на будущие периоды
- **Природные явления**: Визуализация данных о землетрясениях и пожарах, включая тепловую карту сейсмической активности

## Структура проекта

- `app.py` - Основной файл приложения Dash
- `map_visualization.py` - Модуль для создания карт и визуализаций географических данных
- `data_analysis.py` - Модуль для анализа данных и создания визуализаций
- `generate_test_data.py` - Скрипт для генерации тестовых данных (при отсутствии реальных)
- `assets/custom.css` - Стили для улучшения внешнего вида дашборда
- `requirements.txt` - Файл с зависимостями проекта
- `install_requirements.bat` - Скрипт для установки необходимых пакетов
- `run_dashboard.bat` - Скрипт для запуска дашборда

## Запуск проекта

### Установка зависимостей

Для установки всех необходимых пакетов запустите:

```bash
install_requirements.bat
```

или выполните установку вручную:

```bash
pip install -r requirements.txt
```

### Запуск дашборда

Для запуска дашборда выполните:

```bash
run_dashboard.bat
```

или запустите непосредственно приложение Python:

```bash
python app.py
```

Обновленный скрипт `run_dashboard.bat` автоматически проверяет наличие данных и генерирует тестовые данные, если необходимо. Это позволяет запустить дашборд даже при отсутствии реальных данных.

После запуска дашборд будет доступен по адресу http://127.0.0.1:8050/ в вашем браузере.

## Работа с тестовыми данными

Если у вас отсутствуют реальные данные, дашборд автоматически сгенерирует тестовые данные для демонстрации всех возможностей. Для принудительного создания тестовых данных можно запустить:

```bash
python generate_test_data.py
```

Генератор создаст следующие тестовые наборы данных:
1. Туристический поток по годам
2. Уровень воды в Байкале по годам
3. Вылов рыбы по видам и годам
4. Данные о качестве воздуха
5. Географические данные (контуры Байкальской территории, заповедники, города)
6. Данные о землетрясениях и пожарах

## Возможные проблемы и их решение

### Проблемы с установкой географических библиотек (geopandas, fiona)

На Windows установка библиотек для работы с геоданными может вызывать сложности. Если вы видите ошибки при установке этих библиотек или ошибки типа `module 'fiona' has no attribute 'path'`, попробуйте следующие варианты:

1. Установка через conda:
```bash
conda install -c conda-forge geopandas fiona
```

2. Установка бинарных файлов с сайта Christoph Gohlke:
Скачайте и установите соответствующие wheel-файлы с сайта https://www.lfd.uci.edu/~gohlke/pythonlibs/

3. **Использование упрощенной версии дашборда**:
Запустите упрощенную версию, которая не зависит от географических библиотек:
```bash
python app_simple.py
```
или воспользуйтесь скриптом запуска и выберите опцию 2:
```bash
start_dashboard.bat
```

### Ошибка с fiona.path

Если вы видите ошибку `module 'fiona' has no attribute 'path'`, это связано с несовместимостью версий библиотек. Рекомендуем:

1. Переустановить geopandas и fiona через conda:
```bash
conda install -c conda-forge geopandas=0.10.2 fiona=1.8.20
```

2. Или использовать упрощенную версию дашборда без зависимости от этих библиотек:
```bash
python app_simple.py
```

### Ошибки при загрузке данных

Если вы видите сообщение "Ошибка загрузки данных" или пустые графики, проверьте:

1. Структуру папок - убедитесь, что все папки с данными находятся в корневой директории проекта:
   - `География/`
   - `Экология/`
   - `Туризм/`
   - `Леса и животные/`
   - `Землетрясения/`
   - `Пожары/`

2. Названия файлов - приложение ожидает специфические имена файлов, проверьте их наличие:
   - `География/baikal_simply.geojson`
   - `Туризм/Турпоток.xlsx`
   - `Экология/Уровень воды.xlsx`
   - и т.д.

3. При отсутствии реальных данных просто запустите скрипт генерации тестовых данных:
```bash
python generate_test_data.py
```

### Отсутствующие данные о землетрясениях или пожарах

Если вы видите сообщения "Данные о землетрясениях недоступны" или "Данные о пожарах недоступны", выполните:

1. Запустите генерацию конкретного типа данных:
```bash
python -c "import generate_test_data; generate_test_data.generate_earthquake_data()"
python -c "import generate_test_data; generate_test_data.generate_fire_data()"
```

2. Или запустите полную генерацию данных:
```bash
python generate_test_data.py
```

### Проблемы с датами в данных качества воздуха

Если данные о качестве воздуха не отображаются, это может быть связано с неправильным форматом дат. Текущая версия дашборда автоматически пробует несколько форматов дат для обеспечения совместимости.

## Структура данных

Дашборд использует следующие наборы данных:

- **География**: Геоданные о Байкальской природной территории, включая границы региона, заповедники и города
- **Экология**: Данные о качестве воздуха, уровне воды в озере Байкал
- **Туризм**: Статистика туристического потока в регионе
- **Природные явления**: Данные о землетрясениях и пожарах за различные периоды
- **Леса и животные**: Данные о вылове рыбы и другой статистике

## Описание вкладок дашборда

### Карта региона
Интерактивная карта с возможностью масштабирования, отображающая:
- Границы Байкальской природной территории
- Расположение городов
- Заповедники и охраняемые территории
- Образцы данных о землетрясениях и пожарах

### Экология
Набор визуализаций, показывающих:
- Динамику изменения уровня воды в озере Байкал
- Статистику вылова рыбы по видам
- Сопоставление уровня воды и вылова рыбы
- Анализ качества воздуха (концентрация PM2.5)

### Туризм
Визуализации, отображающие:
- Динамику туристического потока в регионе
- Темпы роста туристического потока
- Прогноз туристического потока на будущие периоды

### Природные явления
Анализ природных явлений в регионе:
- Частота землетрясений по десятилетиям
- Магнитуда землетрясений по годам
- Тепловая карта сейсмической активности
- Статистика пожаров по годам

## Технологии

- **Python** - основной язык программирования
- **Dash** - фреймворк для создания интерактивных веб-приложений
- **Plotly** - библиотека для создания интерактивных визуализаций
- **Pandas** - для анализа и обработки данных
- **GeoPandas** (опционально) - для работы с географическими данными
- **Dash Bootstrap Components** - для стилизации интерфейса
- **Scikit-learn** - для создания прогнозных моделей 